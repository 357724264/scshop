<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>购物车</title>
<meta name="viewport" content="initial-scale=1, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.5.6/css/sm.min.css">
<link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.5.6/css/sm-extend.min.css">
<link rel="stylesheet" href="//g.alicdn.com/msui/sm/0.5.6/css/sm-extend.min.css">
<link rel="stylesheet" href="fonts/iconfont.css">
<link rel="stylesheet" href="css/myapp.css">

</head>
<body>
	<div class="page">
	  	<header class="bar bar-nav" id="second-bar">
		    <a class="button button-link button-nav pull-left" href="#" data-transition='slide-out'>
		      	<span class="icon iconfont icon-xiangzuo2"></span>
		    </a>
	    	<h1 class="title">购物车(22)</h1>
	    	<a class="button button-link button-nav pull-right sc-bj" href="#" data-transition='slide-out'>
		      	编辑
		    </a>
	  	</header>

	  	<div class="content padd-content">
	  		<dl class="cart-commoditybox">
	  			<dd class="cart-individualitem">
	  				<div class="sp-dpname">
	  					<label class="sp-xuanze"><input type='checkbox' name="subbox" class="spcart-checkbox dpmenu" /><i class="iconfont icon-duigou"></i></label>
	  					<div class="sp-shangpuname">海飞丝海飞丝海飞丝海</div>
	  				</div>
	  				<div class="sp-infogroup">
	  					<label class="sp-xuanze sp-i-xuanze"><input type='checkbox' name="subbox" class="spcart-checkbox dplist" /><i class="iconfont icon-duigou"></i></label>
	  					<div class="sp-i-cont">
	  						<div class="sp-i-c-box">
	  							<div class="sp-i-c-img">
	  								<a href="#">
	  									<img src="images/wdjf.png" />
	  								</a>
	  							</div>
	  							<div class="sp-i-c-lr">
	  								<a class="sp-i-c-lr-tit">奶粉奶粉奶粉奶粉奶奶粉奶粉奶粉奶粉奶奶粉奶粉奶粉奶粉奶</a>
	  								<div class="sp-i-c-lr-price">&yen;&nbsp;425.00</div>
	  								<div class="sp-i-c-lr-amount">
	  									<div id="d1" class="Spinner"></div>
	  								</div>
	  							</div>
	  						</div>
	  					</div>
	  				</div>
	  				<div class="sp-infogroup">
	  					<label class="sp-xuanze sp-i-xuanze"><input type='checkbox' name="subbox" class="spcart-checkbox dplist" /><i class="iconfont icon-duigou"></i></label>
	  					<div class="sp-i-cont">
	  						<div class="sp-i-c-box">
	  							<div class="sp-i-c-img">
	  								<a href="#">
	  									<img src="images/wdjf.png" />
	  								</a>
	  							</div>
	  							<div class="sp-i-c-lr">
	  								<a class="sp-i-c-lr-tit">奶粉奶粉奶粉奶粉奶奶粉奶粉奶粉奶粉奶奶粉奶粉奶粉奶粉奶</a>
	  								<div class="sp-i-c-lr-price">&yen;&nbsp;425.00</div>
	  								<div class="sp-i-c-lr-amount">
	  									<div id="d1" class="Spinner"></div>
	  								</div>
	  							</div>
	  						</div>
	  					</div>
	  				</div>
	  				<div class="s-c-o-zfbox">
	  					<div class="s-c-o-left">
	  						已选商品1件
	  					</div>
	  					<div class="s-c-o-right">
	  						<table class="s-c-o-pricetotal">
	  							<tr>
	  								<td>商品总额:</td><td>&yen;&nbsp;654.00</td>
	  							</tr>
	  							<tr>
	  								<td>运费:</td><td>&yen;&nbsp;654.00</td>
	  							</tr>
	  							<tr>
	  								<td>总计(不含运费):</td><td class="sco-total">&yen;&nbsp;654.00</td>
	  							</tr>
	  						</table>

	  						<div class="s-c-o-btn">
	  							<a href="#">去结算</a>
	  						</div>
	  					</div>
	  				</div>
	  			</dd>

	  			<dd class="cart-individualitem">
	  				<div class="sp-dpname">
	  					<label class="sp-xuanze"><input type='checkbox' name="subbox" class="spcart-checkbox dpmenu" /><i class="iconfont icon-duigou"></i></label>
	  					<div class="sp-shangpuname">海飞丝海飞丝海飞丝海</div>
	  				</div>
	  				<div class="sp-infogroup">
	  					<label class="sp-xuanze sp-i-xuanze"><input type='checkbox' name="subbox" class="spcart-checkbox dplist" /><i class="iconfont icon-duigou"></i></label>
	  					<div class="sp-i-cont">
	  						<div class="sp-i-c-box">
	  							<div class="sp-i-c-img">
	  								<a href="#">
	  									<img src="images/wdjf.png" />
	  								</a>
	  							</div>
	  							<div class="sp-i-c-lr">
	  								<a class="sp-i-c-lr-tit">奶粉奶粉奶粉奶粉奶奶粉奶粉奶粉奶粉奶奶粉奶粉奶粉奶粉奶</a>
	  								<div class="sp-i-c-lr-price">&yen;&nbsp;425.00</div>
	  								<div class="sp-i-c-lr-amount">
	  									<div id="d1" class="Spinner"></div>
	  								</div>
	  							</div>
	  						</div>
	  					</div>
	  				</div>
	  				<div class="sp-infogroup">
	  					<label class="sp-xuanze sp-i-xuanze"><input type='checkbox' name="subbox" class="spcart-checkbox dplist" /><i class="iconfont icon-duigou"></i></label>
	  					<div class="sp-i-cont">
	  						<div class="sp-i-c-box">
	  							<div class="sp-i-c-img">
	  								<a href="#">
	  									<img src="images/wdjf.png" />
	  								</a>
	  							</div>
	  							<div class="sp-i-c-lr">
	  								<a class="sp-i-c-lr-tit">奶粉奶粉奶粉奶粉奶奶粉奶粉奶粉奶粉奶奶粉奶粉奶粉奶粉奶</a>
	  								<div class="sp-i-c-lr-price">&yen;&nbsp;425.00</div>
	  								<div class="sp-i-c-lr-amount">
	  									<div id="d1" class="Spinner"></div>
	  								</div>
	  							</div>
	  						</div>
	  					</div>
	  				</div>
	  				<div class="s-c-o-zfbox">
	  					<div class="s-c-o-left">
	  						已选商品1件
	  					</div>
	  					<div class="s-c-o-right">
	  						<table class="s-c-o-pricetotal">
	  							<tr>
	  								<td>商品总额:</td><td>&yen;&nbsp;654.00</td>
	  							</tr>
	  							<tr>
	  								<td>运费:</td><td>&yen;&nbsp;654.00</td>
	  							</tr>
	  							<tr>
	  								<td>总计(不含运费):</td><td class="sco-total">&yen;&nbsp;654.00</td>
	  							</tr>
	  						</table>

	  						<div class="s-c-o-btn">
	  							<a href="#">去结算</a>
	  						</div>
	  					</div>
	  				</div>
	  			</dd>
	  		</dl>
	  	</div>  	
	</div>
	
	<script type='text/javascript' src='//g.alicdn.com/sj/lib/zepto/zepto.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='//g.alicdn.com/msui/sm/0.5.7/js/sm.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='//g.alicdn.com/msui/sm/0.5.7/js/sm-extend.min.js' charset='utf-8'></script>   

    <script type="text/javascript" src="js/jquery.Spinner.js"></script><!-- 加减事件 -->
    <script type="text/javascript">
    	$(function(){
    		//编辑
    		$(document).on('click','.sc-bj', function () {
    			var htm = '<a class="button button-link button-nav pull-right shop-bjwc" href="#" data-transition="slide-out">完成</a>'; 
    			$(this).remove();
    			$('#second-bar').append(htm);
    			var html = '<nav class="bar bar-tab" id="shop-cartnav">'+
								'<div class="shop-allselect">'+
									'<label class="shop-as-lb">'+
										'<input type="checkbox" id="checkall" class="shop-as-checkbtn" />'+
										'<span><i class="iconfont icon-duigou"></i>&nbsp;全选</span>'+
									'</label>'+
								'</div>'+
								'<div class="shop-jiesuanobox">'+
									'<a href="#" class="shop-settleaccounts shop-delt">删除</a>'+
								'</div>'+
							'</nav>';
    			
			  	$('#second-bar').after(html);//点击透明层关闭,不是必须
			});

    		//完成
			$(document).on('click','.shop-bjwc', function () {
				var htm = '<a class="button button-link button-nav pull-right sc-bj" href="#" data-transition="slide-out">编辑</a>'; 
    			$(this).remove();
    			$('#second-bar').append(htm);
			  	$('#shop-cartnav').remove();
			});

            //数量加减方法
			$(".Spinner").Spinner(1,1,999);          

			//全选
     		$(document).on('click','#checkall',function (e) {
			    if ($('#checkall').is(":checked")){
			      	$('input[name="subbox"]').prop('checked',true);
			    } else {
			      	$('input[name="subbox"]').prop('checked',false);
			    }
		  	})

		  	function yncheck(){
		  		var leng=$('input[name="subbox"]').length;
     			var leng2=$('input[name="subbox"]:checked').length;
     			$("#checkall").prop("checked",leng == leng2 ? true : false);
		  	}

     		//判断如果是否全部选中
     		$(document).on('click','input[name="subbox"]',function (e) {
     			yncheck();
     		})

		  	$(document).on('click','.dpmenu',function (e) {
			    if ($(this).is(":checked")){
			      	$(this).parent().parent().nextAll('.sp-infogroup').find('input[name="subbox"]').prop('checked',true);
			      	yncheck();
			    } else {
			      	$(this).parent().parent().nextAll('.sp-infogroup').find('input[name="subbox"]').prop('checked',false);
					yncheck();
			    }
		  	})

		  	$(document).on('click','.dplist',function (e) {
		  		var groupparent=$(this).parent().parent().parent();
		  		var groupckeckboxlist=groupparent.find('.dplist').length;
		  		var ckeckedlist=groupparent.find('.dplist:checked').length;

		  		var par=groupparent.find('.dpmenu');
			    par.prop("checked",groupckeckboxlist == ckeckedlist ? true : false);

			    yncheck();
		  	})

        })
    </script>
</body>
</html>